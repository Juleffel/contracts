{"version":3,"sources":["multis/utils.cljs"],"mappings":";;;;AAKA,AAAKA,AAAS,AAAA,AAACC;AACf,AAAA,AAAMC,AAAaC,AAAGC;AAAtB,AAA+B,AAAA,AAAAC,AAACC,AAAMN;AAAP,AAAiB,AAAAK,AAACE,AAAQJ,AAAGC;;;AAC5D,AAAA,AAAMI,AAAaL;AAAnB,AAAuB,AAAA,AAAAM,AAACC,AAAKV,AAASG;;AACtC,AAAA,AAAMQ,AAAgBR;AAAtB,AAA0B,AAAA,AAAAS,AAACN,AAAMN;AAAP,AAAiB,AAAAY,AAACC,AAASV;;;AAErD,AAAA,AAAMW,AACHX,AAAGY,AAAKC;AADX,AAEE,AAAMZ,AACA,AAACa,AACA;AAAA,AACE,AAAMC,AAAY,AAACC,AAAI,AAACC,AAAKX,AAAMY,AAAcN;AAC3CO,AAAM,AAACC,AAAMP,AAAKE;AADxB,AAEE,AAAMI;AAAN,AAAY,AAACE,AAAAA,AAAAA,AAAYF,AAAAA;;AAAzB;;;AALX,AAME,AAACpB,AAAYC,AAAGC;;AAEpB,AAAA,AAAMqB,AACHtB,AAAGY,AAAKO;AADX,AAEE,AAACR,AAAgBX,AAAGY,AACH;AAAOG;AAAP,AACE,AAAM,AAACQ,AAAOC,AAAST;AAAvB,AACEI;;AADF;;;;AADKJ;;;;AAAAA;;AAAAA;;;AAAAA;AAAAA;;;;;;;AAI1B,AAAA,AAAMU,AACHzB;AADH,AAEE,AAAC0B,AAAW,AAACrB,AAAYL;;AACzB,AAACQ,AAAeR;;AAElB,AAAA,AAAM2B,AACHC,AAAaC,AAAkBC,AAAOC;AADzC,AAEE,AAAAC,AAAKJ;AAAL,AAAA,AAAAI;AAAA,AAAAA,AAAkBH;AAAlB,AAAA,AAAAG;AAAA,AAAoC,AAAA,AAAKF,AAAQ,AAAA,AAAKC,AACjD,AAAID,AAAO,AAAA,AAAQC,AAAW,AAAA,AAACE,AAAE,AAACC,AAAIJ,AAAO,AAAA,AAAQC;;AAD1DC;;;AAAAA","names":["multis.utils/triggers","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","multis.utils/add-trigger","id","trigger","p1__40727#","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","multis.utils/get-trigger","cljs.core/deref","cljs.core.get.cljs$core$IFn$_invoke$arity$2","multis.utils/remove-trigger","p1__40730#","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","multis.utils/reg-trigger-raw","subs","func","reagent.core/track!","subs-values","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core.comp.cljs$core$IFn$_invoke$arity$2","re-frame.core/subscribe","event","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","re-frame.core/dispatch","multis.utils/reg-trigger","cljs.core/every?","cljs.core/identity","multis.utils/unreg-trigger","reagent.core/dispose!","multis.utils/stream-values-valid?","user-address","recipient-address","amount","duration","and__4174__auto__","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core/mod"],"sourcesContent":["(ns multis.utils\n  (:require \n   [reagent.core :as r]\n   [re-frame.core :as rf]))\n\n(def triggers (atom {}))\n(defn add-trigger [id trigger] (swap! triggers #(assoc % id trigger)))\n(defn get-trigger [id] (get @triggers id))\n(defn remove-trigger [id] (swap! triggers #(dissoc % id)))\n\n(defn reg-trigger-raw\n  [id subs func]\n  (let [trigger\n        (r/track!\n         (fn []\n           (let [subs-values (map (comp deref rf/subscribe) subs)\n                 event (apply func subs-values)]\n             (when event (rf/dispatch event)))))]\n    (add-trigger id trigger)))\n\n(defn reg-trigger\n  [id subs event]\n  (reg-trigger-raw id subs\n                   (fn [& subs-values]\n                     (when (every? identity subs-values)\n                       event))))\n\n(defn unreg-trigger\n  [id]\n  (r/dispose! (get-trigger id))\n  (remove-trigger id))\n\n(defn stream-values-valid?\n  [user-address recipient-address amount duration]\n  (and user-address recipient-address (< 0 amount) (< 0 duration)\n       (>= amount (* 3600 duration)) (= (mod amount (* 3600 duration)) 0)))"]}