{"version":3,"sources":["multis/subs.cljs"],"mappings":"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","names":["var_args","G__43782","multis.subs/reg-sub-db","args-arr__4810__auto__","len__4789__auto__","i__4790__auto__","argseq__4811__auto__","cljs.core/IndexedSeq","seq43780","G__43781","cljs.core/first","cljs.core/next","self__4776__auto__","db-path","G__43783","G__43784","re-frame.core/reg-sub","db","_","event-name","G__43785","G__43786","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","G__43787","G__43788","cljs.core/vals","cljs.core.get.cljs$core$IFn$_invoke$arity$2","G__43789","G__43790","multis.subs.reg_sub_db.cljs$core$IFn$_invoke$arity$1","G__43791","G__43792","G__43793","G__43794","v","G__43795","G__43796","G__43797","G__43798","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core/count","G__43799","G__43800","G__43801","G__43802","G__43803","G__43804","G__43805","G__43806","G__43807","G__43808","G__43809","G__43810","G__43811","G__43812","G__43813","G__43814","G__43815","G__43816","G__43817","G__43818","G__43819","G__43820","G__43821","G__43822","G__43823","G__43824","p__43825","vec__43826","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","u","r","a","d","G__43829","G__43830","G__43831","G__43832","p__43833","map__43834","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","user-address","recipient-address","amount","duration","multis.utils/stream-values-valid?","G__43836","G__43837","G__43838","G__43839","p__43840","map__43841","and__4174__auto__","G__43843","G__43844","G__43845","G__43846","p__43847","map__43848","G__43850","G__43851","G__43852","G__43853","p__43854","map__43855","cljs.core/mod"],"sourcesContent":["(ns multis.subs\n  (:require\n   [re-frame.core :as rf]\n   [multis.utils :as utils]))\n\n;; Helper for simple db subscriptions\n(defn reg-sub-db\n  ([db-path]\n   (rf/reg-sub\n    db-path\n    (fn [db _]\n      (db db-path))))\n  ([event-name & db-path]\n   (rf/reg-sub\n    event-name\n    (fn [db _]\n      (get-in db db-path)))))\n\n(rf/reg-sub\n :user-accounts\n (fn [db _]\n   (vals (get db :user-accounts))))\n\n(rf/reg-sub\n :recipient-accounts\n (fn [db _]\n   (vals (get db :recipient-accounts))))\n\n(reg-sub-db :token-abi)\n\n(rf/reg-sub\n :new-recipient-address\n :<- [:form-value [:new-recipient-address]]\n (fn [v] v))\n\n(rf/reg-sub\n :new-recipient-address-valid?\n :<- [:new-recipient-address]\n (fn [v] (= (count v) 42)))\n\n(rf/reg-sub\n :stream-amount\n :<- [:form-value [:stream-amount]]\n (fn [v] v))\n\n(rf/reg-sub\n :stream-duration\n :<- [:form-value [:stream-duration]]\n (fn [v] v))\n\n(rf/reg-sub\n :selected-user-account\n :<- [:form-value [:selected-user-account]]\n (fn [v] v))\n\n(rf/reg-sub\n :selected-recipient-account\n :<- [:form-value [:selected-recipient-account]]\n (fn [v] v))\n\n(rf/reg-sub\n :stream-values\n :<- [:selected-user-account]\n :<- [:selected-recipient-account]\n :<- [:stream-amount]\n :<- [:stream-duration]\n (fn [[u r a d]]\n   {:user-address u\n    :recipient-address r\n    :amount (int a)\n    :duration (int d)}))\n\n(rf/reg-sub\n :stream-values-valid?\n :<- [:stream-values]\n (fn [{:keys [:user-address :recipient-address :amount :duration]}]\n   (utils/stream-values-valid? user-address recipient-address amount duration)))\n\n(rf/reg-sub\n :stream-values-filled?\n :<- [:stream-values]\n (fn [{:keys [:user-address :recipient-address :amount :duration]}]\n   (and user-address recipient-address (< 0 amount) (< 0 duration))))\n\n(rf/reg-sub\n :stream-values-enough-tokens?\n :<- [:stream-values]\n (fn [{:keys [:amount :duration]}]\n   (>= amount (* 3600 duration))))\n\n(rf/reg-sub\n :stream-values-mod-ok?\n :<- [:stream-values]\n (fn [{:keys [:amount :duration]}]\n   (= 0 (mod amount (* 3600 duration)))))"]}