{"version":3,"sources":["multis/web3_fx.cljs"],"mappings":"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","names":["var_args","G__54179","multis.web3-fx/fn-dispatch","js/Error","evt","multis.web3_fx.fn_dispatch.cljs$core$IFn$_invoke$arity$2","args-base","args-fn","G__54180","re-frame.core/dispatch","cljs.core/vec","cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic","G__54181","G__54182","re-frame.core/reg-fx","p__54184","map__54185","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","web3","cljs.core.get.cljs$core$IFn$_invoke$arity$2","on-success","on-failure","e54187","multis.cljs-web3/get-accounts","multis.web3_fx.fn_dispatch.cljs$core$IFn$_invoke$arity$1","e","fexpr__54188","G__54189","G__54190","p__54191","map__54192","address","on-error","e54195","multis.cljs-web3/get-balance","fexpr__54196","G__54197","G__54198","p__54199","map__54200","on-tx-error","gas","on-tx-send","on-tx-receipt","on-tx-complete","on-tx-hash","on-tx-confirmation","abi","bin","e54202","contract","multis.cljs-web3/contract-new","multis.cljs-web3/contract-deploy","fexpr__54203","G__54204","G__54205","p__54206","map__54207","e54209","contract-instance","multis.cljs-web3/get-contract","fexpr__54211","fexpr__54210","G__54212","G__54213","p__54214","map__54215","func","args","e54217","multis.cljs-web3/fn-estimate-gas","fexpr__54218","G__54219","G__54220","p__54221","map__54222","e54224","multis.cljs-web3/const-fn-call","fexpr__54225","G__54226","G__54227","p__54228","map__54229","e54231","multis.cljs-web3/fn-send","fexpr__54232","G__54233","G__54234","p__54235","map__54236","token-contract","from","to","deposit","e54238","multis.cljs-web3/approve-tx","fexpr__54239","G__54240","G__54241","p__54242","map__54243","token-address","start-time","sablier-contract","stop-time","e54245","multis.cljs-web3/sablier-create-stream","fexpr__54246"],"sourcesContent":["(ns multis.web3-fx\r\n  (:require\r\n   [re-frame.core :as rf]\r\n\r\n   [multis.cljs-web3 :as cljs-web3]))\r\n\r\n(defn fn-dispatch\r\n  ([evt]\r\n   (if evt\r\n     (fn-dispatch evt [])\r\n     nil))\r\n  ([evt args-base]\r\n   (fn [& args-fn]\r\n     (rf/dispatch (vec (concat evt args-base args-fn)))\r\n     nil)))\r\n\r\n(rf/reg-fx\r\n :web3/get-accounts\r\n (fn [{:keys [:web3 :on-success :on-failure]}]\r\n   (try\r\n     (cljs-web3/get-accounts web3 (fn-dispatch on-success) (fn-dispatch on-failure))\r\n     (catch :default e ((fn-dispatch on-failure) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/get-balance\r\n (fn [{:keys [:web3 :address :on-success :on-error]}]\r\n   (try\r\n     (cljs-web3/get-balance web3 address (fn-dispatch on-success) (fn-dispatch on-error))\r\n     (catch :default e ((fn-dispatch on-error) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/deploy-contract\r\n (fn [{:keys [:web3 :abi :bin :address :gas :on-error :on-tx-error :on-tx-hash :on-tx-send :on-tx-receipt :on-tx-confirmation :on-tx-complete]}]\r\n   (try\r\n     (let [contract (cljs-web3/contract-new web3 abi bin address gas)]\r\n       (cljs-web3/contract-deploy\r\n        contract\r\n        {:on-tx-error (fn-dispatch on-tx-error)\r\n         :on-tx-hash (fn-dispatch on-tx-hash)\r\n         :on-tx-send (fn-dispatch on-tx-send)\r\n         :on-tx-receipt (fn-dispatch on-tx-receipt)\r\n         :on-tx-confirmation (fn-dispatch on-tx-confirmation)\r\n         :on-tx-complete (fn-dispatch on-tx-complete)}))\r\n     (catch :default e ((fn-dispatch on-error) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/get-contract\r\n (fn [{:keys [:web3 :abi :address :on-success :on-error]}]\r\n   (try\r\n     (let [contract-instance (cljs-web3/get-contract web3 abi address)]\r\n       ((fn-dispatch on-success) contract-instance))\r\n     (catch :default e\r\n       ((fn-dispatch on-error) e)))))\r\n\r\n\r\n(rf/reg-fx\r\n :web3/fn-estimate-gas\r\n (fn [{:keys [:contract :address :gas :func :args :on-success :on-error]}]\r\n   (try\r\n     (cljs-web3/fn-estimate-gas contract address gas func args\r\n                                (fn-dispatch on-success)\r\n                                (fn-dispatch on-error))\r\n     (catch :default e\r\n       ((fn-dispatch on-error) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/const-fn-call\r\n (fn [{:keys [:contract :func :args :on-success :on-error]}]\r\n   (try\r\n     (cljs-web3/const-fn-call contract func args\r\n                              (fn-dispatch on-success)\r\n                              (fn-dispatch on-error))\r\n     (catch :default e\r\n       ((fn-dispatch on-error) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/fn-send\r\n (fn [{:keys [:contract :address :gas :func :args :on-success :on-error]}]\r\n   (try\r\n     (cljs-web3/fn-send contract address gas func args\r\n                        (fn-dispatch on-success)\r\n                        (fn-dispatch on-error))\r\n     (catch :default e\r\n       ((fn-dispatch on-error) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/approve-tx\r\n (fn [{:keys [:token-contract :from :to :deposit :on-success :on-error]}]\r\n   (try\r\n     (cljs-web3/approve-tx token-contract from to deposit\r\n                           (fn-dispatch on-success)\r\n                           (fn-dispatch on-error))\r\n     (catch :default e\r\n       ((fn-dispatch on-error) e)))))\r\n\r\n(rf/reg-fx\r\n :web3/sablier-create-stream\r\n (fn [{:keys [:sablier-contract :token-address :from :to :deposit :start-time :stop-time :on-success :on-error]}]\r\n   (try\r\n     (cljs-web3/sablier-create-stream sablier-contract token-address from to deposit start-time stop-time\r\n                                      (fn-dispatch on-success)\r\n                                      (fn-dispatch on-error))\r\n     (catch :default e\r\n       ((fn-dispatch on-error) e)))))"]}